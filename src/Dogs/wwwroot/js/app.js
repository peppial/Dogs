var shoplistApp=angular.module("shoplistApp",["ngResource","ngRoute"]).config(function($routeProvider){$routeProvider.when("/",{templateUrl:"templates/Index.html",controller:"listController"}),$routeProvider.when("/register",{templateUrl:"templates/Register.html",controller:"userController"})});angular.module("shoplistApp").controller("listController",["$scope","ShopList",function($scope,ShopList){null==$scope.user&&($scope.user={Email:"",Password:"",Name:"Peppi",UserId:"peppi"}),$scope.$watch("user.UserId",function(){""!=$scope.user.UserId&&($scope.List=ShopList.query({id:$scope.user.UserId}))}),$scope.clear=function(listid){ShopList["delete"]({id:listid}).$promise.then(function(response){$scope.List=ShopList.query({id:$scope.user.UserId})})},$scope.add=function(text){ShopList.save({Name:text,UserId:$scope.user.UserId}).$promise.then(function(response){$scope.text="",$scope.List=ShopList.query({id:$scope.user.UserId})})}}]),angular.module("shoplistApp").controller("userController",["userService","$scope","$location",function(userService,$scope,$location){var vm=this;this.loggedIn=!0,this.login=function(){userService.login(vm.user).$promise.then(function(data){vm.loggedIn=!0,$scope.user.UserId=data.userId,$scope.user.Name=data.Name},function(err){console.log("Error: ",err)})},this.register=function(){userService.register(vm.user).$promise.then(function(data){$location.path("/"),$location.replace()},function(err){console.log("Error: ",err)})}}]),angular.module("shoplistApp").factory("ShopList",["$resource",function($resource){return $resource("/api/dogsapi/:id",{},{query:{method:"GET",params:{},isArray:!0},"delete":{method:"DELETE",headers:{"Content-Type":"application/json"}}})}]),angular.module("shoplistApp").factory("userService",["$resource",function($resource){return $resource("/api/Account",{},{login:{url:"/api/Account/Login",method:"POST"},register:{url:"/api/Account/Register",method:"POST"},"delete":{method:"DELETE",headers:{"Content-Type":"application/json"}}})}]);